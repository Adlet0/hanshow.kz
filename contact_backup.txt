from django.shortcuts import render, redirect

from django.core.mail import send_mail
from django.contrib import messages
from django.shortcuts import render, redirect
from django.core.mail import send_mail
from django.conf import settings
from django.shortcuts import render, redirect
from django.core.mail import send_mail
from django.conf import settings

def contact_view(request):
    success = False
    if request.method == 'POST':
        name = request.POST.get('name')
        email = request.POST.get('email')
        company = request.POST.get('company', '‚Äî')
        phone = request.POST.get('phone', '‚Äî')
        message = request.POST.get('message')

        subject = f"üì© –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ —Å —Ñ–æ—Ä–º—ã –æ—Ç {name}"
        full_message = (
            f"–ò–º—è: {name}\n"
            f"Email: {email}\n"
            f"–ö–æ–º–ø–∞–Ω–∏—è: {company}\n"
            f"–¢–µ–ª–µ—Ñ–æ–Ω: {phone}\n\n"
            f"–°–æ–æ–±—â–µ–Ω–∏–µ:\n{message}"
        )

        # –ü–∏—Å—å–º–æ –∞–¥–º–∏–Ω—É
        send_mail(
            subject,
            full_message,
            settings.EMAIL_HOST_USER,
            ['adlet0005@gmail.com'],
            fail_silently=False,
        )

        # –ü–∏—Å—å–º–æ –∫–ª–∏–µ–Ω—Ç—É (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º + –∞–Ω–≥–ª–∏–π—Å–∫–æ–º)
        confirmation_subject = "‚úÖ –í–∞—à–∞ –∑–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ / Your request has been received"
        confirmation_message = (
            f"–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, {name}!\n\n"
            "–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –æ–±—Ä–∞—Ç–∏–ª–∏—Å—å –∫ –Ω–∞–º! üôå\n"
            "–ú—ã –ø–æ–ª—É—á–∏–ª–∏ –≤–∞—à—É –∑–∞—è–≤–∫—É –∏ —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.\n\n"
            "–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:\n"
            f"{message}\n\n"
            "–° —É–≤–∞–∂–µ–Ω–∏–µ–º,\n–ö–æ–º–∞–Ω–¥–∞ Hanshow ESL\n"
            "-----------------------------\n\n"
            f"Hello {name},\n\n"
            "Thank you for contacting us! üôå\n"
            "We have received your request and will get back to you soon.\n\n"
            "Your message:\n"
            f"{message}\n\n"
            "Best regards,\nHanshow ESL Team"
        )

        send_mail(
            confirmation_subject,
            confirmation_message,
            settings.EMAIL_HOST_USER,
            [email],
            fail_silently=False,
        )

        success = True

    return render(request, 'contact.html', {'success': success})

def home(request): return render(request, "home.html")
def about(request): return render(request, "about.html")
def solutions(request): return render(request, "solutions.html")
def services(request): return render(request, "services.html")
def nebular_pro(request): return render(request, "products/nebular_pro.html")
def polaris_pro(request): return render(request, "products/polaris_pro.html")
def hanshow_ap(request): return render(request, "products/hanshow_ap.html")
def luminia_aqua(request): return render(request, "products/luminia_aqua.html")


EMAIL_BACKEND = "django.core.mail.backends.smtp.EmailBackend"
EMAIL_HOST = "smtp.gmail.com"
EMAIL_PORT = 587
EMAIL_USE_TLS = True
EMAIL_HOST_USER = "adlet0005@gmail.com"
EMAIL_HOST_PASSWORD = "udwd osue onyq chka"
DEFAULT_FROM_EMAIL = EMAIL_HOST_USER
